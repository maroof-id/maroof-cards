#!/usr/bin/env python3
"""
Fix nfcpy to use ndeflib instead of ndef
"""
import os

nfcpy_tag_init = os.path.expanduser('~/.local/lib/python3.11/site-packages/nfc/tag/__init__.py')

print(f"?? ?????: {nfcpy_tag_init}")

# ????? ?????
with open(nfcpy_tag_init, 'r') as f:
    content = f.read()

# ??????? ?????????
old_import = "from ndef import message_decoder, message_encoder"
new_import = "from ndeflib import message_decoder, message_encoder"

if old_import in content:
    content = content.replace(old_import, new_import)
    
    # ??? ?????
    with open(nfcpy_tag_init, 'w') as f:
        f.write(content)
    
    print("? ?? ???????!")
else:
    print("?? ????????? ??? ????? ?? ?? ?????? ??????")
